(()=>{"use strict";function t(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var r=function(r){if(!Array.isArray(r))return"cords must be an array";var e,n,o=(n=2,function(t){if(Array.isArray(t))return t}(e=r)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;c=!1}else for(;!(c=(n=i.call(e)).done)&&(u.push(n.value),u.length!==r);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,n)||function(r,e){if(r){if("string"==typeof r)return t(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(r,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];return(!Number.isInteger(i)||!Number.isInteger(a)||r.length>2)&&"cords must be an array and contain pair of integers"};function e(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;c=!1}else for(;!(c=(n=i.call(e)).done)&&(u.push(n.value),u.length!==r);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,r)||function(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var i=function(){var t=Array.from({length:10},(function(){return Array.from({length:10},(function(){return 0}))})),n=[];return{placeShip:function(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=function(t,e){return r(t)||(e&&"object"!==o(e)?"options must be an object":e.hasOwnProperty("length")&&!Number.isInteger(e.length)?"length in options must be integer":!(!e.hasOwnProperty("vertical")||"boolean"==typeof e.vertical)&&"vertical in options must be boolean")}(i,a);if(u)throw new Error(u);a.hasOwnProperty("length")||(a.length=1),a.hasOwnProperty("vertical")||(a.vertical=!1);var c=a.length,l=a.vertical,f=e(i,2),s=f[0],y=f[1],p=[];!function(r,e,n,o){for(var i=0;i<n;i++){var a=o?r+i:r,u=o?e:e+i;if(a<0||a>=10||u<0||u>=10||1===t[a][u])throw new Error;if(o){if(u-1>=0&&1===t[a][u-1])throw new Error;if(u+1<10&&1===t[a][u+1])throw new Error;if(r-1>=0&&1===t[r-1][u])throw new Error;if(r+n<10&&1===t[r+n][u])throw new Error;if(r-1>=0&&u-1>=0&&u+1<10&&(1===t[r-1][u-1]||1===t[r-1][u+1]))throw new Error;if(r+n<10&&u-1>=0&&u+1<10&&(1===t[r+n][u-1]||1===t[r+n][u+1]))throw new Error}else{if(a-1>=0&&1===t[a-1][u])throw new Error;if(a+1<10&&1===t[a+1][u])throw new Error;if(e-1>=0&&1===t[a][e-1])throw new Error;if(e+n<10&&1===t[a][e+n])throw new Error;if(e-1>=0&&a-1>=0&&a+1<10&&(1===t[a-1][e-1]||1===t[a+1][e-1]))throw new Error;if(e+n<10&&a-1>=0&&a+1<10&&(1===t[a-1][e+n]||1===t[a+1][e+n]))throw new Error}}}(s,y,c,l);for(var h=0;h<c;h++){var d=l?s+h:s,m=l?y:y+h;t[d][m]=1,p.push([d,m])}n.push(function(t,r,e){var n=0;return{hit:function(){return n++},getHit:function(){return n},isSunk:function(){return t<=n},getCords:function(){return e},isVertical:function(){return r}}}(c,l,p))},getBoard:function(){return t},receiveAttack:function(r){var o=e(r,2),i=o[0],a=o[1];if(1===t[i][a]){var u=n.findIndex((function(t){return t.getCords().find((function(t){return e=t,n=r,JSON.stringify(e)===JSON.stringify(n);var e,n}))}));n[u].hit(),n[u].isSunk()&&n.splice(u,1),t[i][a]="s"}else t[i][a]="x"},allSunk:function(){return 0===n.length},getShips:function(){return n}}};function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function u(t,r){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},u(t,r)}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function l(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function f(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function s(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,r){if("object"!==a(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===a(o)?o:String(o)),n)}var o}function y(t,r,e){return r&&s(t.prototype,r),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}var p=function(){function t(r){f(this,t),this.name="player",this.enemyGameBoard=r}return y(t,[{key:"playTurn",value:function(t){var e=r(t);if(e)throw new Error(e);if(!this.isValidMove(t))throw new Error("This square was already chosen");this.enemyGameBoard.receiveAttack(t)}},{key:"isValidMove",value:function(t){var r,e,n=this.enemyGameBoard.getBoard(),o=(e=2,function(t){if(Array.isArray(t))return t}(r=t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;c=!1}else for(;!(c=(n=i.call(e)).done)&&(u.push(n.value),u.length!==r);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(r,e)||function(t,r){if(t){if("string"==typeof t)return l(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(t,r):void 0}}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];return"x"!==n[i][a]&&"s"!==n[i][a]}},{key:"won",value:function(){return this.enemyGameBoard.allSunk()}},{key:"getEnemyBoard",value:function(){return this.enemyGameBoard.getBoard()}},{key:"getName",value:function(){return this.name}}]),t}(),h=function(t){!function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&u(t,r)}(o,t);var r,e,n=(r=o,e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=c(r);if(e){var o=c(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,r){if(r&&("object"===a(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function o(t){var r;return f(this,o),(r=n.call(this,t)).name="computer",r}return y(o,[{key:"playTurn",value:function(){for(var t=this.generateRandomCords();!this.isValidMove(t);)t=this.generateRandomCords();return this.enemyGameBoard.receiveAttack(t),t}},{key:"generateRandomCords",value:function(){return[Math.floor(10*Math.random()),Math.floor(10*Math.random())]}}]),o}(p);function d(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var m,v,b,g,w,S,E,O=(m=document.querySelector(".player-board .board"),v=document.querySelector(".enemy-board .board"),b=document.querySelector(".enemy-board > button"),g=document.querySelectorAll(".enemy-board > *:not(button)"),w=parseInt(m.offsetWidth/10),S=function(t,r){t.forEach((function(t){var e=t.getCords(),n=e.length,o=document.createElement("div");o.classList.add("ship"),t.isVertical()?(o.style.width="".concat(w-1,"px"),o.style.height="".concat(w*n-1,"px"),o.style.transform="translate(".concat(e[0][1]*w-1,"px, ").concat(e[0][0]*w,"px)")):(o.style.width="".concat(w*n-1,"px"),o.style.height="".concat(w-1,"px"),o.style.transform="translate(".concat(e[0][1]*w-1,"px, ").concat(e[0][0]*w,"px)")),r.appendChild(o)}))},E=function(t){return t.split(",").map((function(t){return+t}))},{renderShips:function(t,r){var e=t.getShips(),n=r.getShips();S(e,m),S(n,v)},renderBoard:function(){for(var t=[m,v],r=function(r){for(var e=function(e){t.forEach((function(t){var n=document.createElement("div");n.setAttribute("data-cords","".concat(r,",").concat(e)),t.appendChild(n)}))},n=0;n<10;n++)e(n)},e=0;e<10;e++)r(e)},activatePlayBtn:function(t){return b.addEventListener("click",t)},activateEnemyBoard:function(){b.style.display="none",g.forEach((function(t){return t.style.opacity="1"})),v.classList.add("active")},attack:function(t){return new Promise((function(r,e){var n,o=t.getEnemyBoard();"computer"===t.getName()?(n=t.playTurn(),console.log(o),r()):v.querySelectorAll("div").forEach((function(e){var i,a,u=(i=E(e.dataset.cords),a=2,function(t){if(Array.isArray(t))return t}(i)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;c=!1}else for(;!(c=(n=i.call(e)).done)&&(u.push(n.value),u.length!==r);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(i,a)||function(t,r){if(t){if("string"==typeof t)return d(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?d(t,r):void 0}}(i,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=u[0],l=u[1];"x"!==o[c][l]&&"s"!==o[c][l]&&e.addEventListener("click",(function(e){n=E(e.currentTarget.dataset.cords),t.playTurn(n),console.log(o),r()}))}))}))}});function j(t){t.placeShip([9,7]),t.placeShip([9,9]),t.placeShip([2,2]),t.placeShip([1,9]),t.placeShip([0,0],{length:2}),t.placeShip([8,0],{length:2}),t.placeShip([8,3],{length:2,vertical:!0}),t.placeShip([7,5],{length:3}),t.placeShip([4,0],{length:3,vertical:!0}),t.placeShip([0,4],{length:4})}!function(){O.renderBoard();var t=i(),r=i();j(t),j(r);var e=new p(r),n=new h(t);O.renderShips(t,r),O.activatePlayBtn((function(){O.activateEnemyBoard(),O.attack(e).then((function(){O.attack(n).then((function(){return console.log("Finished first tour")}))}))}))}()})();