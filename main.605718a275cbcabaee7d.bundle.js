(()=>{"use strict";var t={};function r(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var r;t.g.importScripts&&(r=t.g.location+"");var e=t.g.document;if(!r&&e&&(e.currentScript&&(r=e.currentScript.src),!r)){var n=e.getElementsByTagName("script");n.length&&(r=n[n.length-1].src)}if(!r)throw new Error("Automatic publicPath is not supported in this browser");r=r.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=r})();var e=function(t){if(!Array.isArray(t))return"cords must be an array";var e,n,o=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;u=!1}else for(;!(u=(n=a.call(e)).done)&&(c.push(n.value),c.length!==r);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,n)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],i=o[1];return(!Number.isInteger(a)||!Number.isInteger(i)||t.length>2)&&"cords must be an array and contain pair of integers"},n=function(t,r,e,n,o){var a=t.length,i=t[0].length;r>0&&t[r-1][e]===n&&o([r-1,e]),r<a-1&&t[r+1][e]===n&&o([r+1,e]),e>0&&t[r][e-1]===n&&o([r,e-1]),e<i-1&&t[r][e+1]===n&&o([r,e+1]),r>0&&e>0&&t[r-1][e-1]===n&&o([r-1,e-1]),r>0&&e<i-1&&t[r-1][e+1]===n&&o([r-1,e+1]),r<a-1&&e>0&&t[r+1][e-1]===n&&o([r+1,e-1]),r<a-1&&e<i-1&&t[r+1][e+1]===n&&o([r+1,e+1])};function o(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;u=!1}else for(;!(u=(n=a.call(e)).done)&&(c.push(n.value),c.length!==r);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,r)||c(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=c(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){u=!0,a=t},f:function(){try{i||null==e.return||e.return()}finally{if(u)throw a}}}}function c(t,r){if(t){if("string"==typeof t)return u(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(t,r):void 0}}function u(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var l=function(){var t=Array.from({length:10},(function(){return Array.from({length:10},(function(){return 0}))})),r=[],c=function(t,r){return JSON.stringify(t)===JSON.stringify(r)},u=function(t,e,n,o){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=new Set,l=0,s=r;l<s.length;l++){var f=s[l];if(!a||!c(f.getCords(),a.getCords())){var d,y=i(f.getCords());try{for(y.s();!(d=y.n()).done;){var h=d.value;u.add(h.join(","))}}catch(t){y.e(t)}finally{y.f()}}}for(var p=0;p<n;p++){var v=o?t+p:t,m=o?e:e+p;if(v<0||v>=10||m<0||m>=10||u.has("".concat(v,",").concat(m)))throw new Error;for(var g=v-1;g<=v+1;g++)for(var b=m-1;b<=m+1;b++)if(!(g<0||g>=10||b<0||b>=10)&&u.has("".concat(g,",").concat(b)))throw new Error}};return{placeShip:function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=function(t,r){return e(t)||(r&&"object"!==a(r)?"options must be an object":r.hasOwnProperty("length")&&!Number.isInteger(r.length)?"length in options must be integer":!(!r.hasOwnProperty("vertical")||"boolean"==typeof r.vertical)&&"vertical in options must be boolean")}(n,i);if(c)throw new Error(c);i.hasOwnProperty("length")||(i.length=1),i.hasOwnProperty("vertical")||(i.vertical=!1);var l=i.length,s=i.vertical,f=o(n,2),d=f[0],y=f[1],h=[];u(d,y,l,s);for(var p=0;p<l;p++){var v=s?d+p:d,m=s?y:y+p;t[v][m]=1,h.push([v,m])}r.push(function(t,r,e){var n=0;return{hit:function(){return n++},getHit:function(){return n},isSunk:function(){return t<=n},getCords:function(){return e},isVertical:function(){return r},getLength:function(){return t},updateBoardCords:function(t){return e=t},setIsVertical:function(t){return r=t}}}(l,s,h))},getBoard:function(){return t},receiveAttack:function(e){var a=o(e,2),i=a[0],u=a[1];if(1===t[i][u]){var l=r.findIndex((function(t){return t.getCords().find((function(t){return c(t,e)}))}));r[l].hit(),t[i][u]="s",r[l].isSunk()&&(r[l].getCords().forEach((function(r){var e=o(r,2),a=e[0],i=e[1];n(t,a,i,0,(function(r){var e=o(r,2),n=e[0],a=e[1];return t[n][a]="x"}))})),r.splice(l,1))}else t[i][u]="x"},allSunk:function(){return 0===r.length},getShips:function(){return r},validateShipPlacement:u}};function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function f(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,r){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},d(t,r)}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function h(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;u=!1}else for(;!(u=(n=a.call(e)).done)&&(c.push(n.value),c.length!==r);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,r)||p(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,r){if(t){if("string"==typeof t)return v(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?v(t,r):void 0}}function v(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function m(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function g(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,r){if("object"!==s(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===s(o)?o:String(o)),n)}var o}function b(t,r,e){return r&&g(t.prototype,r),e&&g(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}var S=function(){function t(r){m(this,t),this.name="player",this.enemyGameBoard=r}return b(t,[{key:"playTurn",value:function(t){var r=e(t);if(r)throw new Error(r);if(!this.isValidMove(t))throw new Error("This square was already chosen");this.enemyGameBoard.receiveAttack(t)}},{key:"isValidMove",value:function(t){var r=this.enemyGameBoard.getBoard(),e=h(t,2),n=e[0],o=e[1];return"x"!==r[n][o]&&"s"!==r[n][o]}},{key:"won",value:function(){return this.enemyGameBoard.allSunk()}},{key:"getEnemyBoard",value:function(){return this.enemyGameBoard.getBoard()}},{key:"getName",value:function(){return this.name}}]),t}(),w=function(t){!function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&d(t,r)}(o,t);var r,e,n=(r=o,e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=y(r);if(e){var o=y(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,r){if(r&&("object"===s(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function o(t){var r;return m(this,o),(r=n.call(this,t)).name="computer",r.hitShipCords=null,r.movesToMake=[],r}return b(o,[{key:"playTurn",value:function(){var t;this.hitShipCords&&(t=this.hitAndTargetMode())||(t=this.generateValidMove());var r=h(t,2),e=r[0],n=r[1];return 1===this.enemyGameBoard.getBoard()[e][n]&&(this.hitShipCords=t),this.enemyGameBoard.receiveAttack(t),t}},{key:"hitAndTargetMode",value:function(){var t=this,r=h(this.hitShipCords,2),e=r[0],n=r[1],o=this.enemyGameBoard.getShips().find((function(r){return r.getCords().find((function(r){return JSON.stringify(r)===JSON.stringify(t.hitShipCords)}))})),a=[];o&&(o.isVertical()?(e-1>=0&&this.isValidMove([e-1,n])&&a.push([e-1,n]),e+1<10&&this.isValidMove([e+1,n])&&a.push([e+1,n])):(n-1>=0&&this.isValidMove([e,n-1])&&a.push([e,n-1]),n+1<10&&this.isValidMove([e,n+1])&&a.push([e,n+1])));var i=a.filter((function(r){return function(r){return 1===t.enemyGameBoard.getBoard()[r[0]][r[1]]}(r)}));return this.movesToMake=[].concat(f(this.movesToMake),f(i)),this.movesToMake.length>0?this.movesToMake.shift():(this.hitShipCords=null,this.generateValidMove())}},{key:"generateValidMove",value:function(){var t=this.generateRandomCords();return this.isValidMove(t)?t:this.generateValidMove()}},{key:"generateRandomCords",value:function(){return[Math.floor(10*Math.random()),Math.floor(10*Math.random())]}}]),o}(S);const A=t.p+"images/close-lg-svgrepo-com.2f51b20d2654e260701e250d2b165c4b.svg",C=t.p+"images/dot-small-svgrepo-com.24481ae44de015c025971ac9b301067e.svg",E=t.p+"images/grayDot.05d28db7af55194d2a766e8821a0c642.svg";function x(t){return function(t){if(Array.isArray(t))return L(t)}(t)||O(t)||T(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(t){return B(t)||O(t)||T(t)||k()}function O(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function j(t,r){return B(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;u=!1}else for(;!(u=(n=a.call(e)).done)&&(c.push(n.value),c.length!==r);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(t,r)||T(t,r)||k()}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function T(t,r){if(t){if("string"==typeof t)return L(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?L(t,r):void 0}}function L(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function B(t){if(Array.isArray(t))return t}var I,P,q,V,N,G,R,_,F,$,H,J,U,Y=(I=document.querySelector(".player-board .board"),P=document.querySelector(".enemy-board .board"),q=document.querySelector(".enemy-board > button"),V=document.querySelectorAll(".enemy-board > *:not(button)"),N=document.querySelectorAll(".player-board > *:not(button)"),G=parseInt(I.offsetWidth/10),R=document.querySelector(".game-result"),_=document.querySelector(".message-box"),F=document.querySelector(".player-destroyed-ships"),$=document.querySelector(".computer-destroyed-ships"),H=function(t){return t.split(",").map((function(t){return+t}))},J=function(t,r){return JSON.stringify(t)===JSON.stringify(r)},U=function(t,r){t.forEach((function(t,e){var n=t.getCords(),o=n.length,a=document.createElement("div");a.classList.add("ship"),a.setAttribute("data-shipCords","".concat(n[0])),t.isVertical()?(a.style.width="".concat(G-1,"px"),a.style.height="".concat(G*o-1,"px"),a.style.transform="translate(".concat(n[0][1]*G-1,"px, ").concat(n[0][0]*G,"px)")):(a.style.width="".concat(G*o-1,"px"),a.style.height="".concat(G-1,"px"),a.style.transform="translate(".concat(n[0][1]*G-1,"px, ").concat(n[0][0]*G,"px)")),r.appendChild(a)}))},{renderShips:function(t,r){var e=t.getShips(),n=r.getShips();U(e,I),U(n,P)},renderBoard:function(){I.innerHTML="",P.innerHTML="",_.innerHTML="<p>Place the ships.</p>";for(var t=[I,P],r=function(r){for(var e=function(e){t.forEach((function(t){var n=document.createElement("div");n.setAttribute("data-cords","".concat(r,",").concat(e)),t.appendChild(n)}))},n=0;n<10;n++)e(n)},e=0;e<10;e++)r(e)},activatePlayBtn:function(t){return q.addEventListener("click",t,{once:!0})},activateEnemyBoard:function(){q.style.display="none",V.forEach((function(t){return t.style.opacity="1"})),P.classList.add("active"),F.style.display="grid",$.style.display="grid",I.querySelectorAll("div.ship").forEach((function(t){return t.style.cursor="auto"}))},attack:function t(r,e){return new Promise((function(o,a){var i,c=e.getShips().slice(0),u=r.getEnemyBoard();if("computer"===r.getName()){var l=M(document.querySelectorAll(".player-board .board > div.ship")).slice(0),s=I.querySelectorAll("div:not(div.ship)");_.innerHTML="<p>Opponents turn, please wait.</p>",V.forEach((function(t){return t.style.opacity=".5"})),N.forEach((function(t){return t.style.opacity="1"})),P.classList.remove("active"),setTimeout((function(){i=r.playTurn();var n=x(s).find((function(t){return J(H(t.dataset.cords),i)})),a=c.find((function(t){return t.getCords().find((function(t){return J(t,i)}))})),f=j(i,2),d=f[0],y=f[1];if(p(a,l,s,F),h(d,y,n),"s"===u[d][y]){var v=r.won();v?o(v):t(r,e).then(o)}else o(r.won())}),500)}else{var f=M(document.querySelectorAll(".enemy-board .board > div.ship")).slice(0),d=P.querySelectorAll("div:not(div.ship)"),y=!1;_.innerHTML="<p>Your turn.</p>",N.forEach((function(t){return t.style.opacity=".5"})),P.classList.add("active"),V.forEach((function(t){return t.style.opacity="1"})),d.forEach((function(n){var a=j(H(n.dataset.cords),2),l=a[0],s=a[1];"x"!==u[l][s]&&"s"!==u[l][s]&&n.addEventListener("click",(function(n){if(!y){y=!0,i=H(n.currentTarget.dataset.cords);var a=c.find((function(t){return t.getCords().find((function(t){return J(t,i)}))}));if(r.playTurn(i),p(a,f,d,$),h(l,s,n.currentTarget),"s"===u[l][s]){var v=r.won();v?(N.forEach((function(t){return t.style.opacity="1"})),o(v)):t(r,e).then(o)}else o(r.won())}}))}))}function h(t,r,e){var n=new Image;"x"===u[t][r]?(n.src=C,e.style.backgroundColor="#fafcff"):"s"===u[t][r]&&(n.src=A,n.style.cssText="width: 49px; height: 49px;",e.style.backgroundColor="#fff2f2"),e.appendChild(n),e.classList.add("unavailable")}function p(t,r,e,o){if(t&&t.getCords().every((function(t){var r=j(t,2),e=r[0],n=r[1];return"s"===u[e][n]}))){r.find((function(r){return t.getCords().find((function(t){return J(t,H(r.dataset.shipcords))}))})).style.cssText+="display: block; border-color: #ff2424; outline-color: #ff2424; background-color: transparent;",t.getCords().forEach((function(t){var r=j(t,2),o=r[0],a=r[1];n(u,o,a,"x",(function(t){var r=x(e).find((function(r){return J(H(r.dataset.cords),t)}));if(!r.firstChild){var n=new Image;n.src=E,r.style.backgroundColor="#fafcff",r.classList.add("unavailable"),r.appendChild(n)}}))}));var a=t.getLength();M(o.querySelectorAll('div[data-length="'.concat(a,'"]'))).slice(0).find((function(t){return!t.classList.contains("destroyed")})).classList.add("destroyed")}}}))},showFinalMessage:function(t,r){return new Promise((function(e){R.querySelector("p").innerText=t,R.style.backgroundColor=r?"#58c42d":"#f70c2b",R.style.display="flex",R.querySelector("button").addEventListener("click",(function(t){R.style.display="none",[].concat(x(F.querySelectorAll("div.destroyed")),x($.querySelectorAll("div.destroyed"))).forEach((function(t){return t.classList.remove("destroyed")})),F.style.display="none",$.style.display="none",I.querySelectorAll("div.ship").forEach((function(t){return t.style.cursor="grab"})),e()}),{once:!0})}))},deActivateEnemyBoard:function(){q.style.display="block",V.forEach((function(t){return t.style.opacity=".3"})),P.classList.remove("active")},settingUpShips:function(t){var r=t.getShips(),e=null,n=null,o=!1,a=null,i=null,c=0,u=0,l=0,s=0,f=null,d=!1;function y(t){if(t.target.classList.contains("ship")){d=!0,o=!1,e=r.find((function(r){return r.getCords().find((function(r){return J(r,H(t.target.dataset.shipcords))}))})),n=t.target,c=t.clientX,u=t.clientY;var y=window.getComputedStyle(t.target).transform.split(/\(|\)|,/).slice(1,-1);l=parseFloat(y[4])||0,s=parseFloat(y[5])||0,a=Math.floor(l/G+.5),i=Math.floor(s/G+.5),f=[i,a]}}function h(r){if((o||Math.abs(r.clientX-c)>5||Math.abs(r.clientY-u)>5)&&d){o=!0,n.style.cursor="grabbing";var a=r.clientX-c,i=r.clientY-u,y=l+a,h=s+i,p=Math.floor(y/G+.5),v=Math.floor(h/G+.5),m=e.isVertical()?Array.from({length:e.getLength()},(function(t,r){return[v+r,p]})):Array.from({length:e.getLength()},(function(t,r){return[v,p+r]}));try{t.validateShipPlacement(v,p,e.getLength(),e.isVertical(),e),n.classList.add("valid-pos-dragging");var g=t.getBoard();e.getCords().forEach((function(t){var r=j(t,2),e=r[0],n=r[1];return g[e][n]=0})),m.forEach((function(t){var r=j(t,2),e=r[0],n=r[1];return g[e][n]=1})),e.updateBoardCords(m),n.dataset.shipcords="".concat(v,",").concat(p),n.style.transform="translate(".concat(p*G-1,"px, ").concat(v*G,"px)"),f=[v,p]}catch(r){n.classList.remove("valid-pos-dragging"),n.style.transform="translate(".concat(y,"px, ").concat(h,"px)")}}}function p(a){o?(o=!1,d=!1,n.classList.remove("valid-pos-dragging"),n.style.cursor="grab",n.style.transform="translate(".concat(f[1]*G-1,"px, ").concat(f[0]*G,"px)")):a.target.classList.contains("ship")&&(function(){var o=H(n.dataset.shipcords),a=r.find((function(t){return J(t.getCords()[0],o)})),i=a.isVertical(),c=a.getLength(),u=j(o,2),l=u[0],s=u[1],f=i?Array.from({length:c},(function(t,r){return[l,s+r]})):Array.from({length:c},(function(t,r){return[l+r,s]}));try{t.validateShipPlacement(l,s,c,!i,a),a.setIsVertical(!i),1==!i?(n.style.width="".concat(G-1,"px"),n.style.height="".concat(G*c-1,"px")):(n.style.width="".concat(G*c-1,"px"),n.style.height="".concat(G-1,"px"));var d=t.getBoard();e.getCords().forEach((function(t){var r=j(t,2),e=r[0],n=r[1];return d[e][n]=0})),f.forEach((function(t){var r=j(t,2),e=r[0],n=r[1];return d[e][n]=1})),e.updateBoardCords(f)}catch(t){var y=window.getComputedStyle(n).transform.split(/\(|\)|,/).slice(1,-1),h=parseFloat(y[4])||0,p=parseFloat(y[5])||0;n.animate([{transform:"translate(".concat(h,"px, ").concat(p,"px)"),borderColor:"rgb(255, 116, 116)",outlineColor:"rgb(255, 116, 116)"},{transform:"translate(".concat(h-5,"px, ").concat(p,"px)"),borderColor:"rgb(255, 116, 116)",outlineColor:"rgb(255, 116, 116)"},{transform:"translate(".concat(h+5,"px, ").concat(p,"px)"),borderColor:"rgb(255, 116, 116)",outlineColor:"rgb(255, 116, 116)"},{transform:"translate(".concat(h-5,"px, ").concat(p,"px)"),borderColor:"rgb(255, 116, 116)",outlineColor:"rgb(255, 116, 116)"},{transform:"translate(".concat(h+5,"px, ").concat(p,"px)"),borderColor:"rgb(255, 116, 116)",outlineColor:"rgb(255, 116, 116)"},{transform:"translate(".concat(h,"px, ").concat(p,"px)"),borderColor:"blue",outlineColor:"blue"}],{duration:500,iterations:1})}}(),d=!1)}q.addEventListener("click",(function(){document.removeEventListener("mousedown",y),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",p)})),document.addEventListener("mousedown",y),document.addEventListener("mousemove",h),document.addEventListener("mouseup",p)}}),X=function(t){t.getBoard();for(var r=0,e=[{length:4},{length:3},{length:3},{length:2},{length:2},{length:2},{length:1},{length:1},{length:1},{length:1}];r<e.length;r++)for(var n=e[r].length,o=void 0,a=void 0,i=void 0;;)try{o=Math.floor(10*Math.random()),a=Math.floor(10*Math.random()),i=Math.random()<.5,t.placeShip([o,a],{length:n,vertical:i});break}catch(t){}};!function t(){Y.renderBoard();var r=l(),e=l();X(r),X(e);var n=new S(e),o=new w(r);Y.renderShips(r,e),Y.activatePlayBtn((function(){Y.activateEnemyBoard(),function t(r,e,n,o){return Y.attack(r,o).then((function(a){return a?r:Y.attack(n,e).then((function(a){return a?n:t(r,e,n,o)}))}))}(n,r,o,e).then((function(r){var e,n;"player"===r.getName()?(e="Game over. You win.",n=!0):(e="Game over. You lose.",n=!1),Y.showFinalMessage(e,n).then((function(){Y.deActivateEnemyBoard(),t()}))})).catch((function(t){return console.log(t)}))})),Y.settingUpShips(r)}()})();